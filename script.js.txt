let form=document.querySelector('#submit-button');
 form.addEventListener('click',(e)=> {
  e.preventDefault();
  let CarName=document.querySelector('#CarName');
  let Company=document.querySelector('#Company');
  let Status=document.querySelector('#Status');
  console.log(CarName.value);
  console.log(Company.value);
  console.log(Status.value);
});
 let Cars=[
  {
    "id" : 1,
    "name" : 'Octavia',
    "company" : 'Skoda', 
    "status" : 'Active'
  },
  {
    "id" : 2,
    "name" : 'A7',
    "company" : 'Audi' , 
    "status" : 'Active' 
  },
  {
    "id" : 3,
    "name" : 'Nexon',
    "company" : 'Tata', 
    "status" : 'Active'
  }
];
getCars=()=> {
  let{name,company,status}=cars;
  let carsdiv=document.createElement('div');
  carsdiv.classList.add('carsdiv-div');
  let nametitle=document.createElement('h2');
  carsdiv.appendChild(Nametitle);
  carsdiv.appendChild(Companytitle);
  body.appendChild(carsdiv);
}


getCars=()=> {
  let url='https://localhost/car/getcars.php';
  let xhr=new XMLHttpRequest();
  xhr.open('GET',url,true);
  
xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
  
  xhr.onload=()=> {
    if(xhr.readyState==4 && xhr.status==200)
    {
      let response=JSON.parse(xhr.responseText);
      
      let{Cars}=response;
      cars.forEach(cr=> {
        let {id,name,company,status}=cr;
   let body=document.querySelector('.main-body');
        let carsdiv=document.createElement('div');
        carsdiv=classList.add('cars-div');
        let namehead=document.createElement('h2');
        let namevl=document.createTextNode(name);
        namehead.appendChild(namevl);
        carsdiv.appendChild(namehead);
        body.appendChild(cardiv);
      });
    }
    else
    {
      console.log('error occured' +xhr.status)
    }
  }
  xhr.send();
  }
  getCars();

 
createCars=(e)=>{
    let url='https://localhost/car/getcars.php';
    e.preventDefault();
    let name=document.querySelector('#CarName').value;
    let 
    form=document.querySelector('#Company').value;
  
  form=document.querySelector('#Status').value;
  
    let data={
        "CarName":Carname,
        "Company":Company,
        "Status" : Status,
    };
    let params=JSON.stringify(data);
    let xhr=new XMLHttpRequest();
    xhr.open('POST',url,true);
    xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    xhr.onload=()=>{
        if(xhr.readyState==4||xhr.responseText==200)
        {
            let message=document.createElement('h4');
            let msgtxt=document.createTextNode('Cars created');
            let msgarea=document.querySelector('#message-area');
            message.appendChild(msgtxt);
            msgarea.appendChild(message);
        }
        else
        {
            let message=document.createElement('h4');
            let msgtxt=document.createTextNode('Error occured');
            let msgarea=document.querySelector('#message-area');
            message.appendChild(msgtxt);
            msgarea.appendChild(message);
        

        }
    }
    xhr.send(params);
}
let msgarea=document.querySelector('#main-body');
           form.addEventListener('submit',createCars);
 

 getFeed=()=> {
  let url='https://localhost/car/getFeed.php';
  let xhr=new XMLHttpRequest();
  xhr.open('GET',url,true);
  
xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
  
  xhr.onload=()=> {
    if(xhr.readyState==4 && xhr.status==200)
    {
      let response=JSON.parse(xhr.responseText);
      
      let{Feed}=response;
      cars.forEach(fe=> {
        let {name,email,remark}=fe;
   let body=document.querySelector('.main-body');
        let feeddiv=document.createElement('div');
        carsdiv=classList.add('feed-div');
        let namehead=document.createElement('h2');
        let namevl=document.createTextNode(name);
        namehead.appendChild(namevl);
        carsdiv.appendChild(namehead);
        body.appendChild(cardiv);
      });
    }
    else
    {
      console.log('error occured' +xhr.status)
    }
  }
  xhr.send();
  }
  getFeed();